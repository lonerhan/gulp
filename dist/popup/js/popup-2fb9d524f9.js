function Popup(){"use strict";function t(t,n){if(r.indexOf(t)===-1)return!1;n=n||{},c.getElementsByClassName("popup-"+t)[0]||e(t),n.text&&(u[t].text=n.text),n.maskColor&&(u[t].maskColor=n.maskColor),p.style.backgroundColor=u[t].maskColor,o();var a=c.getElementsByClassName("popup-"+t)[0];if(a.getElementsByClassName("text")[0].textContent=u[t].text,"confirm"===t){n.buttonReverse&&(u.confirm.buttonReverse=n.buttonReverse);var l=a.getElementsByClassName("button");u.confirm.buttonReverse?(l[0].style.float="right",l[1].style.float="left"):(l[0].style.float="left",l[1].style.float="right");var i=a.getElementsByClassName("yes")[0],m=a.getElementsByClassName("no")[0];s(i,n.success,u.confirm.success),s(m,n.failure,u.confirm.failure)}n.timeout&&setTimeout(function(){o()},n.timeout),a.style.display="block",c.style.display="block"}function e(t){var e=document.createElement("div");e.classList.add("popup-item","popup-"+t),e.innerHTML=i[t],c.appendChild(e)}function s(t,e,s){n(e)?t.onclick=function(){s(),e()}:t.onclick=s}function n(t){return"[object Function]"===Object.prototype.toString.call(t)}function o(){var t=c.getElementsByClassName("popup-item");c.style.display="none";for(var e=0,s=t.length;e<s;e++)t[e].style.display="none"}if(document.getElementById("popup-box")||document.getElementsByClassName("popup-box")[0]);else{var a=document.createElement("div"),l=document.createElement("div");a.setAttribute("id","popup-box"),a.classList.add("popup-box"),l.classList.add("popup-mask"),a.appendChild(l),document.getElementsByTagName("body")[0].appendChild(a)}var i={confirm:'<div class="confirm-text"><p class="text"></p></div><div class="confirm-button clear-fix">    <button class="button no">取消</button>    <button class="button yes">确定</button></div>',loading:'<span class="icon loading"></span><p class="text"></p>',success:'<span class="icon"></span><p class="text"></p>',failure:'<span class="icon"></span><p class="text"></p>'},c=document.getElementById("popup-box"),p=c.getElementsByClassName("popup-mask")[0],r=["confirm","loading","success","failure"],u={confirm:{maskColor:"rgba(67, 67, 67, 0.5)",text:"解绑后将无法收到该设备的任何消息。您确定要解绑吗?",buttonReverse:!1,success:function(){var t=c.getElementsByClassName("popup-confirm")[0];c.style.display="none",t.style.display="none"},failure:function(){var t=c.getElementsByClassName("popup-confirm")[0];c.style.display="none",t.style.display="none"}},loading:{maskColor:"transparent",text:"解绑中..."},success:{maskColor:"transparent",text:"该设备已解除绑定"},failure:{maskColor:"transparent",text:"该设备解绑失败 请重试"}},m=function(t){t.preventDefault(),t.stopPropagation()},d=function(t){t.stopPropagation()};return c.addEventListener("touchmove",m,!1),p.addEventListener("touchstart",d,!1),p.addEventListener("touchend",d,!1),p.addEventListener("click",d,!1),{show:function(e,s){t(e,s)},close:function(){o()}}}